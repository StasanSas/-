

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
	<script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>

	<style>
		body,
		html {
			margin: 0;
			padding: 0;
			height: 100%;
		}

		#map {
			height: 100%;
			background-color: white;
		}
	</style>
</head>

<body>
	<div id="map"></div>
	<script>
		var map = L.map('map').setView([51.505, -0.09], 13);


		L.imageOverlay('photo_2024-04-04_16-54-01.jpg', [[0, 0], [100, 400]]).addTo(map);



		var polygons = [
			[[0, 0], [0, 10], [10, 10], [10, 0]],
			[[50, 50], [60, 50], [60, 60], [55, 65], [50, 60]]
		];

		var comments = [
			"Аудитория хз какая с проектором и маркерной доской",
			"супер маленькая аудитория без всего)"
		];

		var times = [
			["00:00", "12:00"],
			["12:00", "24:00"]
		];

		var polygonArray = [];
		polygons.forEach((coords, index) => {
			var polygon = L.polygon(coords, { color: 'blue' }).addTo(map);
			polygon.bindPopup(comments[index]);
			polygonArray.push(polygon);
		});



		map.fitBounds([[0, 0], [100, 400]]);



		function changePolygonColor() {
			var currentTime = new Date();
			var currentHours = currentTime.getHours();
			var currentMinutes = currentTime.getMinutes();

			polygonArray.forEach((polygon, index) => {
				var time = times[index];
				var startHour = parseInt(time[0].split(":")[0]);
				var startMinute = parseInt(time[0].split(":")[1]);
				var endHour = parseInt(time[1].split(":")[0]);
				var endMinute = parseInt(time[1].split(":")[1]);

				if ((currentHours > startHour || (currentHours === startHour && currentMinutes >= startMinute)) && (currentHours < endHour || (currentHours === endHour && currentMinutes <= endMinute))) {
					polygon.setStyle({ color: 'red' });
				} else {
					polygon.setStyle({ color: 'blue' });
				}
			});
		}

		changePolygonColor(20, 0, 21, 50);

		setInterval(changePolygonColor, 60000);
	</script>
</body>

</html>





